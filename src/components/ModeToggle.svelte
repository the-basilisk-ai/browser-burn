<script lang="ts">
  import { LIGHT_MODE, DARK_MODE } from "../constants/theme";
  import { theme } from "../stores/theme";

  export let className: string = "";

  theme.subscribe((value) => (themeValue = value));
  $: themeValue = $theme;

  const toggleMode = () => {
    theme.set(themeValue.key === DARK_MODE ? LIGHT_MODE : DARK_MODE);
  };
</script>

<button
  title="Toggle light/dark mode"
  class={className}
  type="button"
  aria-label="toggle color mode"
  on:click={toggleMode}
>
  <svg
    width="24"
    height="24"
    viewBox="0 0 24 24"
    fill={themeValue.textBrand}
    xmlns="http://www.w3.org/2000/svg"
    focusable="false"
  >
    {#if themeValue.key === DARK_MODE}
      <path
        d="M19.4999 12.6583C19.3688 14.0768 18.8365 15.4287 17.9651 16.5557C17.0938 17.6826 15.9195 18.5382 14.5797 19.0221C13.2398 19.5061 11.7899 19.5984 10.3995 19.2884C9.0091 18.9784 7.73575 18.2788 6.72844 17.2715C5.72113 16.2642 5.02153 14.9908 4.71151 13.6004C4.40148 12.21 4.49385 10.7601 4.9778 9.42025C5.46175 8.08042 6.31728 6.90614 7.44426 6.03479C8.57125 5.16345 9.92308 4.63109 11.3416 4.5C10.5111 5.62356 10.1115 7.00787 10.2154 8.40118C10.3193 9.79448 10.9198 11.1042 11.9078 12.0922C12.8957 13.0801 14.2054 13.6807 15.5987 13.7846C16.992 13.8885 18.3764 13.4888 19.4999 12.6583Z"
        stroke="current"
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"
      />
    {:else}
      <path
        fill-rule="evenodd"
        clip-rule="evenodd"
        d="M12 1.83325C12.5523 1.83325 13 2.28097 13 2.83325V4.49992C13 5.0522 12.5523 5.49992 12 5.49992C11.4477 5.49992 11 5.0522 11 4.49992V2.83325C11 2.28097 11.4477 1.83325 12 1.83325ZM12.0002 8.83325C10.2513 8.83325 8.8335 10.251 8.8335 11.9999C8.8335 13.7488 10.2513 15.1666 12.0002 15.1666C13.7491 15.1666 15.1668 13.7488 15.1668 11.9999C15.1668 10.251 13.7491 8.83325 12.0002 8.83325ZM6.8335 11.9999C6.8335 9.14645 9.14669 6.83325 12.0002 6.83325C14.8536 6.83325 17.1668 9.14645 17.1668 11.9999C17.1668 14.8534 14.8536 17.1666 12.0002 17.1666C9.14669 17.1666 6.8335 14.8534 6.8335 11.9999ZM13 19.5C13 18.9477 12.5523 18.5 12 18.5C11.4477 18.5 11 18.9477 11 19.5V21.1667C11 21.719 11.4477 22.1667 12 22.1667C12.5523 22.1667 13 21.719 13 21.1667V19.5ZM4.80949 4.80949C5.20002 4.41897 5.83318 4.41897 6.22371 4.80949L7.40704 5.99283C7.79757 6.38335 7.79757 7.01652 7.40704 7.40704C7.01652 7.79757 6.38335 7.79757 5.99283 7.40704L4.80949 6.22371C4.41897 5.83318 4.41897 5.20002 4.80949 4.80949ZM18.0069 16.5929C17.6164 16.2024 16.9832 16.2024 16.5927 16.5929C16.2022 16.9835 16.2022 17.6166 16.5927 18.0072L17.776 19.1905C18.1666 19.581 18.7997 19.581 19.1902 19.1905C19.5808 18.8 19.5808 18.1668 19.1902 17.7763L18.0069 16.5929ZM1.8335 12C1.8335 11.4477 2.28121 11 2.8335 11H4.50016C5.05245 11 5.50016 11.4477 5.50016 12C5.50016 12.5523 5.05245 13 4.50016 13H2.8335C2.28121 13 1.8335 12.5523 1.8335 12ZM19.5 11C18.9477 11 18.5 11.4477 18.5 12C18.5 12.5523 18.9477 13 19.5 13H21.1667C21.719 13 22.1667 12.5523 22.1667 12C22.1667 11.4477 21.719 11 21.1667 11H19.5ZM7.40704 16.5929C7.79757 16.9835 7.79757 17.6166 7.40704 18.0072L6.22371 19.1905C5.83318 19.581 5.20002 19.581 4.80949 19.1905C4.41897 18.8 4.41897 18.1668 4.80949 17.7763L5.99283 16.5929C6.38335 16.2024 7.01652 16.2024 7.40704 16.5929ZM19.1902 6.22371C19.5808 5.83318 19.5808 5.20002 19.1902 4.80949C18.7997 4.41897 18.1666 4.41897 17.776 4.80949L16.5927 5.99283C16.2022 6.38335 16.2022 7.01652 16.5927 7.40704C16.9832 7.79757 17.6164 7.79757 18.0069 7.40704L19.1902 6.22371Z"
        fill="current"
      />
    {/if}
  </svg>
</button>
